<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fantasy Draft Tracker</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body { background-color: #121212; color: #f8f9fa; }
    .navbar { background-color: #222; }
    .card { background-color: #1e1e1e; color: #f8f9fa; margin-bottom: 1rem; }
    .btn { margin: 0.25rem; }
    .player-card.drafted { opacity: 0.4; }
    .high-rank { border-left: 5px solid #28a745; }
    .medium-rank { border-left: 5px solid #ffc107; }
    .low-rank { border-left: 5px solid #dc3545; }
    .collapsed-summary { font-size: 0.9rem; color: #aaa; }
    .icon { font-size: 1rem; margin-left: 6px; }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Draft Tracker</a>
      <div>
        <a href="#" id="tab-draft" class="nav-link text-light">Draft</a>
        <a href="#" id="tab-managers" class="nav-link text-light">Managers</a>
        <a href="#" id="tab-settings" class="nav-link text-light">Settings</a>
      </div>
    </div>
  </nav>
  <main id="root" class="container my-4"></main>  <!-- Debug/Error Overlay + React Loader -->
  <script>
    (function(){
      function show(msg){
        var box = document.getElementById('boot-error-box');
        if (!box){
          box = document.createElement('div');
          box.id = 'boot-error-box';
          box.style.cssText = 'position:fixed;left:8px;right:8px;bottom:8px;z-index:99999;background:#240b0b;color:#ffd7d7;border:1px solid #b44;padding:10px;border-radius:10px;font:14px/1.4 sans-serif;white-space:pre-wrap;max-height:40vh;overflow:auto;';
          box.innerHTML = '<strong>Boot error</strong><br>';
          document.addEventListener('click', () => box.remove(), {once:true});
          document.body.appendChild(box);
        }
        box.innerHTML += (msg || 'Unknown error') + '\n';
      }

      window.addEventListener('error', e=>{
        show((e.message||'Script error')+' @ '+(e.filename||'')+':'+(e.lineno||'')+':'+(e.colno||''));
      });
      window.addEventListener('unhandledrejection', e=>{
        let r = e.reason || {};
        show('Promise rejection: '+(r.stack||r.message||r.toString()));
      });

      (function loadReact(){
        const urls = [
          'https://unpkg.com/react@18/umd/react.production.min.js',
          'https://unpkg.com/react-dom@18/umd/react-dom.production.min.js'
        ];
        let loaded = 0;
        urls.forEach(src=>{
          let s=document.createElement('script');
          s.src=src; s.async=false;
          s.onload=()=>{ loaded++; if(loaded===urls.length){ document.dispatchEvent(new Event('react-ready')); } };
          s.onerror=()=>show('Failed to load '+src);
          document.head.appendChild(s);
        });
      })();
    })();
  </script>  <script>
    const e = React.createElement;
    const { useState, useEffect } = React;

    // Sample data until you upload CSV
    const SAMPLE_PLAYERS = [
      { id:1, name:'Justin Jefferson', team:'MIN', pos:'WR', bye:13, rank:1, tier:'high' },
      { id:2, name:'Christian McCaffrey', team:'SF', pos:'RB', bye:9, rank:2, tier:'high' },
      { id:3, name:'Travis Kelce', team:'KC', pos:'TE', bye:10, rank:3, tier:'high' }
    ];
    const SAMPLE_MANAGERS = [
      { id:1, name:'You', budget:200, spent:0 },
      { id:2, name:'Opponent 1', budget:200, spent:0 }
    ];

    function App(){
      const [view, setView] = useState('draft');
      const [players,setPlayers] = useState(SAMPLE_PLAYERS);
      const [managers,setManagers] = useState(SAMPLE_MANAGERS);
      const [drafted,setDrafted] = useState([]);
      const [search,setSearch] = useState('');

      function draftPlayer(p){
        setDrafted([{...p, cost:20, drafter:'You'}, ...drafted]);
        setPlayers(players.map(x=>x.id===p.id ? {...x,drafted:true} : x));
      }

      function Roster(){
        return e('div',{},
          e('h5',{},'My Roster'),
          drafted.map(p=>
            e('div',{key:p.id,className:`card p-2 mb-1 ${p.tier}-rank`},
              `${p.name} (${p.pos}) - Bye ${p.bye} - $${p.cost}`
            )
          )
        );
      }

      function PlayerList(){
        return e('div',{},
          e('input',{
            className:'form-control mb-2',
            placeholder:'Search player...',
            value:search,
            onChange:ev=>setSearch(ev.target.value)
          }),
          players.filter(p=>p.name.toLowerCase().includes(search.toLowerCase()))
            .map(p=>
              e('div',{key:p.id,className:`card p-2 mb-2 player-card ${p.drafted?'drafted':''}`},
                e('div',{}, `${p.name} (${p.team}) - ${p.pos}`),
                !p.drafted && e('button',{className:'btn btn-sm btn-success',onClick:()=>draftPlayer(p)},'Draft')
              )
            )
        );
      }

      function ManagersView(){
        return e('div',{},
          e('h5',{},'Managers'),
          managers.map(m=>
            e('div',{key:m.id,className:'card p-2 mb-1'},
              `${m.name} - $${m.budget-m.spent} left`
            )
          )
        );
      }

      function Settings(){
        return e('div',{},
          e('h5',{},'Settings'),
          e('input',{type:'file',className:'form-control mb-2'}),
          e('button',{className:'btn btn-outline-info',onClick:()=>setPlayers(SAMPLE_PLAYERS)},'Load Sample Players')
        );
      }

      return e('div',{},
        view==='draft' && e('div',{}, e(PlayerList), e(Roster)),
        view==='managers' && e(ManagersView),
        view==='settings' && e(Settings)
      );
    }

    document.addEventListener('react-ready', ()=>{
      ReactDOM.createRoot(document.getElementById('root')).render(e(App));
      // tab navigation
      document.getElementById('tab-draft').onclick=(ev)=>{ev.preventDefault();document.querySelectorAll('.nav-link').forEach(x=>x.classList.remove('active'));ev.target.classList.add('active');ReactDOM.createRoot(document.getElementById('root')).render(e(App));};
      document.getElementById('tab-managers').onclick=(ev)=>{ev.preventDefault();document.querySelectorAll('.nav-link').forEach(x=>x.classList.remove('active'));ev.target.classList.add('active');ReactDOM.createRoot(document.getElementById('root')).render(e(App,{view:'managers'}));};
      document.getElementById('tab-settings').onclick=(ev)=>{ev.preventDefault();document.querySelectorAll('.nav-link').forEach(x=>x.classList.remove('active'));ev.target.classList.add('active');ReactDOM.createRoot(document.getElementById('root')).render(e(App,{view:'settings'}));};
    });
  </script></body>
</html>
